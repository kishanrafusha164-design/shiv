<meta name='viewport' content='width=device-width, initial-scale=1'/><!DOCTYPE html>
<html lang="gu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Auto Daily Stock Sheet</title>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

<style>
  body {
    font-family: 'Noto Sans Gujarati', sans-serif;
    background: #f3f4f6;
    padding: 20px;
    display: flex;
    justify-content: center;
  }
  .card {
    background: white;
    border-radius: 15px;
    padding: 20px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    width: 95%;
    max-width: 420px;
    text-align: center;
  }
  h1 { font-size: 22px; margin-bottom: 10px; }
  table { width: 100%; border-collapse: collapse; margin: 10px 0; }
  th, td { border: 1px solid #ddd; padding: 8px; }
  th { background: #f9fafb; }
  input { width: 100%; padding: 5px; text-align: center; border: 1px solid #ccc; border-radius: 6px; }
  button { padding: 10px 15px; border: none; border-radius: 6px; color: white; margin: 5px; cursor: pointer; font-weight: bold; }
  .save { background: #f59e0b; }
  .load { background: #3b82f6; }
  .whatsapp { background: #16a34a; }
  .pdf { background: #4b5563; }
  .info { margin-top: 10px; color: #374151; font-size: 14px; }
</style>
</head>
<body>
<div class="card">
  <h1>ğŸ“¦ Auto Daily Stock Sheet</h1>

  <label>Select Date:
    <input type="date" id="dateInput">
  </label>

  <table>
    <tr><th>Stock</th><th>Item</th><th>Auto</th></tr>
    <tbody id="stockTable">
      <tr><td><input type="number" value="0"></td><td>àª²à«€àªŸàª°</td><td><input type="number" value="0"></td></tr>
      <tr><td><input type="number" value="0"></td><td>àª¤àª¾àªœàª¾</td><td><input type="number" value="0"></td></tr>
      <tr><td><input type="number" value="0"></td><td>àª›àª¾àª¸</td><td><input type="number" value="0"></td></tr>
      <tr><td><input type="number" value="0"></td><td>àª àª¬à«àª¡àª¾</td><td><input type="number" value="0"></td></tr>
      <tr><td><input type="number" value="0"></td><td>àª¦àª¹à«€</td><td><input type="number" value="0"></td></tr>
      <tr><td><input type="number" value="0"></td><td>àª–àª¾àªŸà«€ àª›àª¾àª¸</td><td><input type="number" value="0"></td></tr>
      <tr><td><input type="number" value="0"></td><td>àª®àª¾àª–àª£</td><td><input type="number" value="0"></td></tr>
    </tbody>
  </table>

  <button class="save" onclick="saveData()">ğŸ’¾ Save</button>
  <button class="load" onclick="loadData()">ğŸ“‚ Load</button><br>
  <button class="whatsapp" onclick="shareWhatsApp()">ğŸ’¬ Share WhatsApp</button>
  <button class="pdf" onclick="window.print()">ğŸ–¨ï¸ PDF / Print</button>

  <div class="info" id="infoText">â„¹ï¸ Firebase Connected</div>
</div>

<script>
  // ğŸ”¥ Firebase Config -- àª¨à«€àªšà«‡ àª¤àª®àª¾àª°à«àª‚ àª¸àª¾àªšà«àª‚ Firebase Config àª®à«‚àª•à«‹
  const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
    databaseURL: "https://YOUR_PROJECT_ID-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "YOUR_PROJECT_ID",
    storageBucket: "YOUR_PROJECT_ID.appspot.com",
    messagingSenderId: "YOUR_SENDER_ID",
    appId: "YOUR_APP_ID"
  };

  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  document.getElementById("dateInput").valueAsDate = new Date();

  function getTableData() {
    const rows = document.querySelectorAll("#stockTable tr");
    const data = [];
    rows.forEach(r => {
      const stock = r.children[0].querySelector("input").value || "0";
      const item = r.children[1].textContent.trim();
      const auto = r.children[2].querySelector("input").value || "0";
      data.push({ item, stock, auto });
    });
    return data;
  }

  function saveData() {
    const date = document.getElementById("dateInput").value;
    const data = getTableData();
    firebase.database().ref("stock/" + date).set(data)
      .then(() => document.getElementById("infoText").textContent = "âœ… Data Saved Successfully!")
      .catch(err => alert(err.message));
  }

  function loadData() {
    const date = document.getElementById("dateInput").value;
    firebase.database().ref("stock/" + date).once("value")
      .then(snapshot => {
        if (snapshot.exists()) {
          const data = snapshot.val();
          const rows = document.querySelectorAll("#stockTable tr");
          data.forEach((d, i) => {
            rows[i].children[0].querySelector("input").value = d.stock;
            rows[i].children[2].querySelector("input").value = d.auto;
          });
          document.getElementById("infoText").textContent = "ğŸ“‚ Data Loaded Successfully!";
        } else {
          document.getElementById("infoText").textContent = "âŒ No data found, enter new values.";
        }
      });
  }

  function shareWhatsApp() {
    const date = document.getElementById("dateInput").value;
    const data = getTableData()
      .map(d => `${d.stock} | ${d.item} | ${d.auto}`)
      .join("\n");
    const text = encodeURIComponent(`ğŸ“‹ Auto Daily Stock Sheet - ${date}\nStock | Item Name | Auto\n${data}`);
    window.open("https://wa.me/?text=" + text, "_blank");
  }
</script>
</body>
</html>